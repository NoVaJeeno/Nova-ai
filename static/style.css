document.addEventListener("DOMContentLoaded", function () {
    const sendButton = document.getElementById("send");
    const messageInput = document.getElementById("message");
    const chatbox = document.getElementById("chatbox");

    sendButton.addEventListener("click", async function () {
        let userMessage = messageInput.value.trim();
        if (userMessage === "") return;

        chatbox.innerHTML += `<p><strong>Du:</strong> ${userMessage}</p>`;
        messageInput.value = "";

        let response = await fetch("/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: userMessage })
        });

        let result = await response.json();
        if (result.response) {
            chatbox.innerHTML += `<p><strong>KI:</strong> ${result.response}</p>`;
        } else {
            chatbox.innerHTML += `<p style="color:red;">Fehler: ${result.error}</p>`;
        }
    });
});